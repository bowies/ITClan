<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="companyinfo">
	<insert id="create" parameterType="CompanyInfoDTO">
		insert into
		CompanyInfo(companyID, companyName, companyScale, bossName,
		companyNumber, ci, categoryCode)
		values(#{companyID},#{companyName},
		#{companyScale}, #{bossName},
		#{companyNumber},#{ci},#{categoryCode})


	</insert>


	<select id="list" resultType="CompanyInfoDTO" parameterType="Map">

		select companyID, companyName, companyScale, bossName, companyNumber,
		ci, categoryCode, r
		from(
		select companyID, companyName, companyScale,
		bossName, companyNumber, ci, categoryCode, rownum r
		from(

		select
		companyID, companyName, companyScale, bossName, companyNumber,
		ci,
		categoryCode
		from CompanyInfo
		<where>
			<choose>
				<when test="col=='companyID'">
					companyID like '%'||#{word}||'%'
				</when>
				<when test="col=='companyName'">
					companyName like '%'||#{word}||'%'
				</when>
			</choose>
		</where>
		order by companyNumber ASC
		)
		)   
                                                               
   <![CDATA[                                                                        
   where r>=#{sno} and r<=#{eno}  
   ]]>
	</select>

	<update id="update" parameterType="CompanyInfoDTO">
		update CompanyInfo
		set
		companyName=#{companyName}, companyScale=#{companyScale},
		bossName=#{bossName}, companyNumber=#{companyNumber}, ci=#{ci},
		categoryCode=#{categoryCode}
		where companyID=#{companyID}



	</update>


	<delete id="delete" parameterType="string">
		delete from CompanyInfo
		where
		companyID=#{companyID}
	</delete>


	<select id="read" resultType="CompanyInfoDTO" parameterType="String">
		select companyID, companyName, companyScale, bossName, companyNumber,
		ci, categoryCode
		from CompanyInfo
		where companyID=#{companyID}
	</select>


	<select id="total" parameterType="Map" resultType="int">
		select count(*) from CompanyInfo
		<where>
			<choose>
				<when test="col=='companyID'">
					companyID LIKE '%' || #{word} || '%'
				</when>

			</choose>
		</where>
	</select>

</mapper>